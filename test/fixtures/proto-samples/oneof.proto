// Oneof field definitions for gRPC/Protobuf parser tests
// Tests oneof groups and union type handling

syntax = "proto3";

package example.oneof;

// Simple oneof with two string options
message Contact {
  string id = 1;
  string name = 2;
  
  oneof contact_method {
    string email = 3;
    string phone = 4;
  }
}

// Oneof with different types
message PaymentInfo {
  string transaction_id = 1;
  double amount = 2;
  
  oneof payment_method {
    string credit_card = 3;
    string bank_account = 4;
    string paypal_email = 5;
    int64 crypto_wallet_id = 6;
    bool cash_on_delivery = 7;
  }
}

// Oneof with message types
message Media {
  string id = 1;
  string title = 2;
  
  message ImageData {
    string url = 1;
    int32 width = 2;
    int32 height = 3;
    string format = 4;
  }
  
  message VideoData {
    string url = 1;
    int32 duration_seconds = 2;
    string resolution = 3;
    string codec = 4;
  }
  
  message AudioData {
    string url = 1;
    int32 duration_seconds = 2;
    int32 bitrate = 3;
    string format = 4;
  }
  
  oneof content {
    ImageData image = 3;
    VideoData video = 4;
    AudioData audio = 5;
  }
}

// Multiple oneofs in same message
message Notification {
  string id = 1;
  int64 timestamp = 2;
  
  // Who to notify
  oneof recipient {
    string user_id = 3;
    string group_id = 4;
    string broadcast_channel = 5;
  }
  
  // How to notify
  oneof channel {
    string email_address = 6;
    string sms_number = 7;
    string push_token = 8;
    string webhook_url = 9;
  }
  
  // What to notify
  oneof content {
    string plain_text = 10;
    string html_content = 11;
    bytes binary_payload = 12;
  }
}

// Oneof with enum inside
message Result {
  string operation_id = 1;
  
  enum ErrorCode {
    ERROR_CODE_UNKNOWN = 0;
    ERROR_CODE_NOT_FOUND = 1;
    ERROR_CODE_PERMISSION_DENIED = 2;
    ERROR_CODE_TIMEOUT = 3;
    ERROR_CODE_INTERNAL = 4;
  }
  
  message SuccessData {
    string result = 1;
    int64 processing_time_ms = 2;
  }
  
  message ErrorData {
    ErrorCode code = 1;
    string message = 2;
    optional string details = 3;
  }
  
  oneof outcome {
    SuccessData success = 2;
    ErrorData error = 3;
  }
}

// Oneof with primitive and message types mixed
message SearchQuery {
  string index = 1;
  
  message FullTextSearch {
    string query = 1;
    repeated string fields = 2;
    optional bool fuzzy = 3;
  }
  
  message TermQuery {
    string field = 1;
    string value = 2;
  }
  
  message RangeQuery {
    string field = 1;
    optional double min = 2;
    optional double max = 3;
  }
  
  oneof query_type {
    string simple_query = 2;           // Simple string query
    FullTextSearch full_text = 3;      // Full text search
    TermQuery term = 4;                // Exact term match
    RangeQuery range = 5;              // Range query
  }
  
  optional int32 limit = 6;
}
