// Nested messages and enums for gRPC/Protobuf parser tests
// Tests nested message types and nested enum definitions

syntax = "proto3";

package example.nested;

// Message with nested message type
message Order {
  int64 id = 1;
  string customer_id = 2;
  
  // Nested message definition
  message Item {
    string product_id = 1;
    int32 quantity = 2;
    double unit_price = 3;
    optional string notes = 4;
  }
  
  repeated Item items = 3;
  double total = 4;
  
  // Nested enum inside message
  enum OrderStatus {
    ORDER_STATUS_UNKNOWN = 0;
    ORDER_STATUS_PENDING = 1;
    ORDER_STATUS_CONFIRMED = 2;
    ORDER_STATUS_SHIPPED = 3;
    ORDER_STATUS_DELIVERED = 4;
    ORDER_STATUS_CANCELLED = 5;
  }
  
  OrderStatus status = 5;
}

// Multi-level nested messages
message Organization {
  string name = 1;
  
  message Department {
    string name = 1;
    string code = 2;
    
    message Team {
      string name = 1;
      repeated string member_ids = 2;
      
      message Project {
        string title = 1;
        string description = 2;
        bool active = 3;
      }
      
      repeated Project projects = 3;
    }
    
    repeated Team teams = 3;
  }
  
  repeated Department departments = 2;
}

// Message referencing nested types from another message
message OrderSummary {
  string order_id = 1;
  Order.OrderStatus status = 2;
  repeated Order.Item items = 3;
}

// Nested enum only (no nested messages)
message PaymentMethod {
  enum Type {
    TYPE_UNKNOWN = 0;
    TYPE_CREDIT_CARD = 1;
    TYPE_DEBIT_CARD = 2;
    TYPE_PAYPAL = 3;
    TYPE_BANK_TRANSFER = 4;
  }
  
  Type type = 1;
  string details = 2;
}

// Complex nesting with multiple nested types at same level
message Catalog {
  string id = 1;
  string name = 2;
  
  message Category {
    string id = 1;
    string name = 2;
    optional string parent_id = 3;
  }
  
  message Product {
    string id = 1;
    string name = 2;
    string category_id = 3;
    double price = 4;
    
    enum Availability {
      AVAILABILITY_UNKNOWN = 0;
      AVAILABILITY_IN_STOCK = 1;
      AVAILABILITY_OUT_OF_STOCK = 2;
      AVAILABILITY_PREORDER = 3;
    }
    
    Availability availability = 5;
  }
  
  repeated Category categories = 3;
  repeated Product products = 4;
}
